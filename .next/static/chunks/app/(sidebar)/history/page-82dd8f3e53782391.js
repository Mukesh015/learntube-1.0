(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7410],{27723:function(e,t,a){Promise.resolve().then(a.bind(a,87376))},87376:function(e,t,a){"use strict";a.r(t);var n=a(89483),s=a(57437),r=a(2265),o=a(70910),i=a(82386),l=a(87611),d=a(4984),c=a(39828),u=a(21432),h=a(56884),m=a(56452),f=a(17916),b=a(44092),p=a(19593),x=a.n(p);a(44193);var v=a(16463),g=a(89857);function w(){let e=(0,n._)(["\n\nquery history($email: String) {\n    getHistory(email: $email) {\n        courseID\n        courseFees\n        videoId\n        videoTitle\n        channelLogo\n        videoPublishedAt\n        videoViews\n        videoThumbnail\n        viewedAt\n    }\n  }\n\n"]);return w=function(){return e},e}let y=(0,u.Ps)(w());t.default=()=>{let e=(0,v.useRouter)(),[t,a]=r.useState(!1),[n,u]=(0,r.useState)(""),[p,w]=(0,r.useState)([]),[j]=(0,m.F_)(f.I8),{isDarkMode:N}=(0,b.v)(),{loading:k,error:T,data:S}=(0,h.a)(y,{variables:{email:n}}),I=e=>{let t=parseInt(e,10);if(isNaN(t))return"Invalid timestamp";let a=new Date,n=new Date(t),s=Math.floor((a.getTime()-n.getTime())/1e3);return s<0?"Future timestamp":s<60?"".concat(s," seconds ago"):s<3600?"".concat(Math.floor(s/60)," minutes ago"):s<86400?"".concat(Math.floor(s/3600)," hours ago"):"".concat(Math.floor(s/86400)," days ago")},_=(0,r.useCallback)(async(t,a,s)=>{try{let e=await fetch("".concat("https://learntube-server.onrender.com","/features/addtohistory"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,videoId:t})}),a=await e.json();console.log("Video added to history:",a)}catch(e){console.error("Failed to add video to history:",e)}if(null===a){e.push("/video/".concat(t));return}try{let a=await fetch("".concat("https://learntube-server.onrender.com","/api/isenroll"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,courseId:s})}),r=await a.json();!0===r.isEnrolled?e.push("/video/".concat(t)):e.push("/payment/".concat(s))}catch(e){console.error("Failed to fetch enrollment status:",e)}},[n]);return(0,r.useEffect)(()=>{j&&u(j.email||""),S&&n&&(w(S.getHistory),console.table(S.getHistory))},[u,S,w,n,j]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x(),{}),(0,s.jsx)(o.default,{query:""}),(0,s.jsx)(i.default,{}),k?(0,s.jsx)("div",{className:"pt-52 pl-72 pb-10  min-h-screen ".concat(N?"bg-white":"bg-black"),children:[...Array(6)].map((e,a)=>(0,s.jsxs)("div",{className:"flex mb-5",children:[(0,s.jsx)(g.X,{isLoaded:t,className:"w-72 mb-5 rounded-lg",children:(0,s.jsx)("div",{className:"h-36 w-full rounded-lg bg-gray-500"})}),(0,s.jsxs)("div",{className:"w-full flex items-center gap-3 ml-7",children:[(0,s.jsx)("div",{children:(0,s.jsx)(g.X,{className:"flex rounded-full w-12 h-12"})}),(0,s.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,s.jsx)(g.X,{className:"h-3 w-3/5 rounded-lg"}),(0,s.jsx)(g.X,{className:"h-3 w-4/5 rounded-lg"})]})]})]},a))}):(0,s.jsxs)("div",{className:"".concat(N?"bg-white text-black":"bg-black text-white"," pb-10"),children:[(0,s.jsx)("nav",{className:"pt-24 pr-20",children:(0,s.jsxs)("ul",{className:"flex flex-row-reverse gap-10",children:[(0,s.jsx)(c.e,{color:"warning",delay:700,showArrow:!0,content:"Fiter videos",children:(0,s.jsxs)("li",{className:"flex ext-blue-500 text-blue-500 font-semibold hover:bg-blue-200 px-2 rounded-2xl cursor-default py-1",children:[(0,s.jsxs)("svg",{className:"mr-2",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#2e4bc9",children:[(0,s.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,s.jsx)("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"})]}),"Filter"]})}),(0,s.jsx)(c.e,{color:"warning",delay:700,showArrow:!0,content:"Save watch history",children:(0,s.jsx)("li",{className:"z-0",children:(0,s.jsx)(l.i,{classNames:{base:(0,d.cn)("inline-flex flex-row-reverse w-full max-w-md items-center","justify-between cursor-pointer rounded-lg gap-2 p-2 ","data-[selected=true]:border-primary"),wrapper:"p-0 h-4 overflow-visible",thumb:(0,d.cn)("w-6 h-6 border-2 shadow-lg","group-data-[hover=true]:border-primary","group-data-[selected=true]:ml-6","group-data-[pressed=true]:w-7","group-data-[selected]:group-data-[pressed]:ml-4")}})})}),(0,s.jsx)("li",{className:"text-3xl font-bold text-amber-600",style:{marginRight:"680px"},children:"Watch History"})]})}),(0,s.jsx)("div",{className:"ml-80 ",children:(0,s.jsxs)("div",{id:"description-container",className:"",style:{marginTop:"40px"},children:[(0,s.jsx)("p",{className:"text-xl mb-7",children:"Today"}),p.map((e,t)=>(0,s.jsxs)("div",{id:"video-content",className:"flex mb-10",children:[(0,s.jsx)("img",{className:"transition ease-in-out delay-150 hover:-translate-y-1 hover:scale-110 duration-150 rounded-md",height:200,width:200,src:e.videoThumbnail,alt:"",onClick:()=>{_(e.videoId,e.courseFees,e.courseID)}}),(0,s.jsxs)("div",{className:"flex mt-10 ml-5 justify-center mr-10",children:[(0,s.jsx)("div",{children:(0,s.jsx)("img",{height:30,width:30,className:"rounded-full m-1",src:e.channelLogo,alt:""})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h1",{className:"font-bold",children:e.videoTitle})," ",(0,s.jsxs)("p",{className:"text-gray-500 text-small",children:[e.videoViews," views - ",I(e.videoPublishedAt)," "]})]})]})]},t))]})})]})]})}},44193:function(){},89857:function(e,t,a){"use strict";a.d(t,{X:function(){return u}});var n=a(4984),s=(0,a(9576).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300 before:transition-opacity before:!duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{disableAnimation:!1}}),r=a(36222),o=a(65263),i=a(53640),l=a(2265),d=a(57437),c=(0,n.Gp)((e,t)=>{let{Component:a,children:c,getSkeletonProps:u,getContentProps:h}=function(e){let[t,a]=(0,n.oe)(e,s.variantKeys),{as:d,children:c,isLoaded:u=!1,className:h,classNames:m,...f}=t,b=(0,l.useMemo)(()=>s({...a}),[(0,r.Xx)(a),c]),p=(0,o.W)(null==m?void 0:m.base,h);return{Component:d||"div",children:c,slots:b,classNames:m,getSkeletonProps:(e={})=>({"data-loaded":(0,i.PB)(u),className:b.base({class:(0,o.W)(p,null==e?void 0:e.className)}),...f}),getContentProps:(e={})=>({className:b.content({class:(0,o.W)(null==m?void 0:m.content,null==e?void 0:e.className)})})}}({...e});return(0,d.jsx)(a,{ref:t,...u(),children:(0,d.jsx)("div",{...h(),children:c})})});c.displayName="NextUI.Skeleton";var u=c}},function(e){e.O(0,[8405,4050,2330,3109,9593,7486,6452,4049,9898,6323,4241,6048,8700,910,2386,2971,7023,1744],function(){return e(e.s=27723)}),_N_E=e.O()}]);